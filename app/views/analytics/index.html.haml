= page_title('Analytics')
%section.content-header
  %h4
    Analytics
    %small= @app.name
  %ol.breadcrumb
    %li
      %a{:href => root_url}
        %i.fa.fa-dashboard
        Dashboard
    %li
      %a{href: my_apps_path} Apps
    %li
      %a{href: app_path(@app)}= @app.name
    %li.active Analytics
%section.content
  .row
    .col-md-3.col-xs-6
      .form-group
        %label Choose Version
        = select_tag "analytics_version", options_from_collection_for_select(@app.versions, 'id', 'number'), class: 'form-control select2', style: 'width: 100%;'
  .row
    .col-sx-12.text-center.text-light-blue.text-uppercase
      %h4 #{@app.name} Analytics - Tour
  .row
    .col-xs-12.col-md-6
      .box
        .box-body.no-padding
          %table.table.table-striped
            %tr
              %th Asset
              %th Version
              %th Progress
              %th Avg time users spent
            %tr
              %td
                %a{href: '#'} Step 1
              %td 1
              %td
                .progress.progress-xs
                  .progress-bar.progress-bar-danger{:style => "width: 55%"}
              %td
                %span.badge.bg-red 55%
            %tr
              %td
                %a{href: '#'} Step 2
              %td 1
              %td
                .progress.progress-xs
                  .progress-bar.progress-bar-yellow{:style => "width: 70%"}
              %td
                %span.badge.bg-yellow 70%
            %tr
              %td
                %a{href: '#'} Step 3
              %td 1
              %td
                .progress.progress-xs.progress-striped.active
                  .progress-bar.progress-bar-primary{:style => "width: 30%"}
              %td
                %span.badge.bg-light-blue 30%
            %tr
              %td
                %a{href: '#'} Step 4
              %td 1
              %td
                .progress.progress-xs.progress-striped.active
                  .progress-bar.progress-bar-success{:style => "width: 90%"}
              %td
                %span.badge.bg-green 90%
    .col-xs-12.col-md-6
      .box
        .box-header.with-border
          %h3.box-title Average time users spent
          -#.box-tools.pull-right
            %button.btn.btn-box-tool{"data-widget" => "collapse", :type => "button"}
              %i.fa.fa-minus
        .box-body
          %canvas#pieChart{:style => "height:200px"}

  // permissions
  .row
    .col-sx-12.text-center.text-light-blue.text-uppercase
      %h4 #{@app.name} Analytics - Permissions
  .row
    .col-xs-12
      .box
        .box-body.no-padding
          %table.table.table-striped
            %tr
              %th Asset
              %th Version
              %th Avg time users spent
            %tr
              %td.text-uppercase
                %a{href: '#'} Camera
              %td 1
              %td
                %span.badge.bg-light-blue 1.5
            %tr
              %td.text-uppercase
                %a{href: '#'} Contacts
              %td 1
              %td
                %span.badge.bg-light-blue 2
            %tr
              %td.text-uppercase
                %a{href: '#'} Location
              %td 1
              %td
                %span.badge.bg-light-blue 1.76
            %tr
              %td.text-uppercase
                %a{href: '#'} Notifications
              %td 1
              %td
                %span.badge.bg-light-blue 3.4
:javascript
    //-------------
    //- PIE CHART -
    //-------------
    // Get context with jQuery - using jQuery's .get() method.
    var pieChartCanvas = $("#pieChart").get(0).getContext("2d");
    var pieChart = new Chart(pieChartCanvas);
    var PieData = [
      {
        value: 55,
        color: "#f56954",
        highlight: "#f56954",
        label: "Step 1"
      },
      {
        value: 70,
        color: "#f39c12",
        highlight: "#f39c12",
        label: "Step 2"
      },
      {
        value: 30,
        color: "#3c8dbc",
        highlight: "#3c8dbc",
        label: "Step 3"
      },
      {
        value: 90,
        color: "#00a65a",
        highlight: "#00a65a",
        label: "Step 4"
      }
    ];
    var pieOptions = {
      //Boolean - Whether we should show a stroke on each segment
      segmentShowStroke: true,
      //String - The colour of each segment stroke
      segmentStrokeColor: "#fff",
      //Number - The width of each segment stroke
      segmentStrokeWidth: 2,
      //Number - The percentage of the chart that we cut out of the middle
      percentageInnerCutout: 50, // This is 0 for Pie charts
      //Number - Amount of animation steps
      animationSteps: 100,
      //String - Animation easing effect
      animationEasing: "easeOutBounce",
      //Boolean - Whether we animate the rotation of the Doughnut
      animateRotate: true,
      //Boolean - Whether we animate scaling the Doughnut from the centre
      animateScale: false,
      //Boolean - whether to make the chart responsive to window resizing
      responsive: true,
      // Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container
      maintainAspectRatio: true,
      //String - A legend template
      legendTemplate: "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<segments.length; i++){%><li><span style=\"background-color:<%=segments[i].fillColor%>\"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>"
    };
    //Create pie or douhnut chart
    // You can switch between pie and douhnut using the method below.
    pieChart.Doughnut(PieData, pieOptions);